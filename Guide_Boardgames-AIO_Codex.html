<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="CODEX LUDUS: The Apex Strategic Supersystem">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Codex">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>CODEX LUDUS | God Mode</title>
    
    <!-- PWA Manifest (Embedded) -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkNvZGV4IEx1ZHVzIiwKICAic2hvcnRfbmFtZSI6ICJDT0RFWCIsCiAgInN0YXJ0X3VybCI6ICIuIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMDAwMDAwIiwKICAidGhlbWVfY29sb3IiOiAiIzIyZDNlZSIsCiAgImljb25zIjogW10KfQ==">

    <!-- Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS Engine -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        bg: '#000000',          
                        surface: '#09090b',     
                        panel: '#121214',       
                        border: 'rgba(255,255,255,0.08)',
                        primary: '#22d3ee',     // Cyan-400 (Intel)
                        primaryDim: 'rgba(34, 211, 238, 0.1)',
                        accent: '#f43f5e',      // Rose-500 (Aggression)
                        accentDim: 'rgba(244, 63, 94, 0.1)',
                        alert: '#fbbf24',       // Amber-400 (Warning)
                        txt: '#f4f4f5',         
                        muted: '#71717a',       
                        success: '#34d399',    
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    animation: {
                        'slide-up': 'slideUp 0.35s cubic-bezier(0.16, 1, 0.3, 1)',
                        'fade-in': 'fadeIn 0.25s ease-out',
                        'pulse-slow': 'pulse 3s infinite',
                    },
                    keyframes: {
                        slideUp: { '0%': { transform: 'translateY(20px)', opacity: 0 }, '100%': { transform: 'translateY(0)', opacity: 1 } },
                        fadeIn: { '0%': { opacity: 0 }, '100%': { opacity: 1 } }
                    }
                }
            }
        }
    </script>
    <style>
        :root { --app-height: 100vh; }
        body { background-color: #000000; color: #f4f4f5; -webkit-tap-highlight-color: transparent; overscroll-behavior-y: none; }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #27272a; border-radius: 2px; }
        
        .glass-nav { background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-bottom: 1px solid var(--border-color); }
        .glass-panel { background: rgba(18, 18, 20, 0.6); backdrop-filter: blur(30px); border: 1px solid var(--border-color); }
        
        .formula { font-family: 'JetBrains Mono', monospace; color: #22d3ee; background: rgba(34,211,238,0.08); padding: 1px 4px; border-radius: 4px; font-size: 0.9em; border: 1px solid rgba(34,211,238,0.15); }
        .kill-shot { color: #f43f5e; font-weight: 700; letter-spacing: -0.01em; }
        .highlight { color: #fff; font-weight: 700; text-decoration: underline; text-decoration-color: #22d3ee; text-underline-offset: 4px; }
        
        a { color: #22d3ee; text-decoration: none; border-bottom: 1px dashed rgba(34,211,238,0.4); transition: all 0.2s; }
        a:hover { color: #fff; border-bottom-style: solid; }
    </style>
</head>
<body class="font-sans antialiased selection:bg-primary/30">
    <div id="root"></div>

    <!-- Application Runtime -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- 1. THE ARCHIVE (STRATEGIC DATABASE v14.2) ---
        const DATABASE = [
            {
                id: "7w", name: "7 Wonders", weight: 2.3, time: "<30m", type: "Technical", cat: "Drafting",
                orientation: {
                    hook: "Civilization building is a lie. This is a resource starvation engine.",
                    victory: "VP Sum. **Science ($n^2$)** is for math-savants. **Civilian (Blue)** is for consistent winners. Specialization beats generalization every time.",
                    directive: "**The Parasitic Economy.** Do not build what you need; build what your *neighbors* need. If you produce the only Brick, they must pay you. Use their money to buy what you lack. If a card helps your neighbor more than you, bury it under your Wonder.",
                    finisher: "**The Age III Cliff.** Costs skyrocket. If you lack a 'Free Chain' (e.g. Scriptorium â†’ Library) or 10+ coins by Age III, you are dead."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** Inspect neighbors. Draft the raw material (Gray/Brown) that is SCARCE in their starting cities. Force dependency immediately.",
                    mistakes: [
                        "**The Hoarder:** Building a resource you can buy for 1 coin. Waste of a turn.",
                        "**Science Dabbler:** Going Green without committing to 3+ sets. It's exponential or nothing.",
                        "**Peacekeeper:** Taking a -1 token ($0 pts$) is better than wasting 3 turns on shields to tie. Lose the war, win the bank."
                    ],
                    synergy: "**Vineyard/Haven:** Turns neighbor assets into your gold.\n\n**Scientists Guild:** The wildcard that squares your score.",
                    setup: "Sit to the **left** of a Military player; they ignore resources, passing them to you."
                },
                intel: { scaling: "3-4P: **Hate Drafting.** Block aggressively. // 5-7P: **Solitaire.** Focus on self-sufficiency.", meta: "**Chain Memory:** Memorize the links. Altar -> Temple -> Pantheon. Save your resources." }
            },
            {
                id: "7wd", name: "7 Wonders Duel", weight: 2.2, time: "30m", type: "Technical", cat: "Duel",
                orientation: {
                    hook: "A knife-fight in a phone booth. Zero-sum resource denial.",
                    victory: "**Civilian**, **Military (Instant)**, **Science (Instant)**. Threaten instant wins to force bad plays.",
                    directive: "**Control the Reveal.** Never draft a card that flips a good card for your opponent. Use 'Repeat Turn' Wonders to take a card, reveal the next, and take that too.",
                    finisher: "**The Red/Green Clock.** If opponent hits the penultimate Military slot, you *must* draft Red. Force them to waste turns defending."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** Draft a card that does NOT reveal a face-down card. Force your opponent to open the board for you.",
                    mistakes: [
                        "**Wonder Hoarding:** Delaying your 4th Wonder. You lose the slot if they build 4 first.",
                        "**Gold Starvation:** Without Yellow, monopolies will bankrupt you ($4+ per resource).",
                        "**Blind Reveal:** Uncovering a game-winning card for the enemy."
                    ],
                    synergy: "**The Sphinx:** Extra turn. The best Wonder in the game.\n\n**Yellow Monopoly:** Hoard Brown/Grey cards to starve their economy.",
                    setup: "Player 2 should draft **Great Library** or **Pyramids**."
                },
                intel: { scaling: "Strictly 2P. Economy is closed.", meta: "**Law Token:** The Scientific symbol for 'Law' is the key to victory." }
            },
            {
                id: "az", name: "Azul", weight: 1.8, time: "45m", type: "Psychological", cat: "Abstract",
                orientation: {
                    hook: "A game of chicken. You aren't filling walls; you're overflowing their floor.",
                    victory: "Adjacency + Verticals ($7pt$) + Colors ($10pt$). Game ends on Horizontal.",
                    directive: "**Weaponize the Floor.** Calculate the tile count. Force the last player to take a massive pile of a single color. This **'Tile Bomb'** is a -14 point swing.",
                    finisher: "**The Stall.** If behind, force the game to continue. Build verticals (7pts). If ahead, rush the top row (5 tiles) to kill the game."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** Take the -1 token IF it secures a massive color group or forces a -4 penalty on the opponent.",
                    mistakes: [
                        "**Fear of -1:** The First Player token is the most powerful tile. Take it.",
                        "**Top-Down:** Fill hard rows (4/5) early. Easy rows (1/2) fill with garbage later.",
                        "**Ignoring Verticals:** 7 points per column is the real score."
                    ],
                    synergy: "**Adjacency Chaining:** Place tiles touching existing ones for double scoring.",
                    setup: "Use **Grey Side** for competitive play."
                },
                intel: { scaling: "2P: **Zero-Sum.** Hate-drafting is mandatory. // 3-4P: **Chaos.** Defend yourself.", meta: "**Color Lock:** Finishing a row locks that color out. Predict the draft." }
            },
            {
                id: "ca", name: "Carcassonne", weight: 2.0, time: "45m", type: "Social", cat: "Area Control",
                orientation: {
                    hook: "Hostile takeover warfare disguised as map building.",
                    victory: "Points. **Farmers (Fields)** are the nuclear option.",
                    directive: "**Parasitic Integration.** Don't build; invade. Place a tile near a big city, add a meeple, then connect them later to steal the points. If you have majority, you take **everything**.",
                    finisher: "**The Scavenger.** Last 10 tiles: Stop building. Only complete tiny 2-tile features for quick points."
                },
                tactics: {
                    opener: "**Turn 1-5 (Cradle):** Build small. Retrieve meeples. Do not commit to a Farm until a city of 6+ points exists.",
                    mistakes: [
                        "**Cathedral Trap:** Putting a Cathedral in your own city risks scoring 0. Put it in an *opponent's* city to poison it.",
                        "**Meeple Exhaustion:** Always keep 1 meeple in reserve.",
                        "**Farmer Neglect:** A central field is worth 30 points. Die for it."
                    ],
                    synergy: "**Big Meeple:** Counts as 2. Use it to steal shared cities.",
                    setup: "Count the tiles. Know the caps."
                },
                intel: { scaling: "2P: **Hostile.** Steal everything. // 3-5P: **Diplomatic.** Share points.", meta: "**Stranding:** Trap opponent meeples in impossible features." }
            },
            {
                id: "ch", name: "Chess", weight: 3.7, time: "Var", type: "Technical", cat: "Abstract",
                orientation: {
                    hook: "The eternal game of perfect information. Pure calculation.",
                    victory: "**Checkmate.** Remove the King's reality.",
                    directive: "**Control the Center.** Squares d4, e4, d5, e5 are the high ground. Occupy them.",
                    finisher: "**The End Game.** King becomes an active fighting piece. Push passed pawns."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** White: e4/d4. Black: e5/c5. Contest the center immediately.",
                    mistakes: [
                        "**Early Queen:** She gets chased by minor pieces, wasting tempo.",
                        "**Blunder Check:** Look at every piece. Is it hanging?",
                        "**King Safety:** Castle by move 10."
                    ],
                    synergy: "**The Battery:** Rooks doubled on a file.",
                    setup: "White on right."
                },
                intel: { scaling: "N/A", meta: "**Space:** A cramped position is death. Trade pieces to breathe." }
            },
            {
                id: "cl", name: "Clank!", weight: 2.2, time: "60m", type: "Technical", cat: "Deck Building",
                orientation: {
                    hook: "Not a dungeon crawler; an efficiency engine. Exploration without profit is failure.",
                    victory: "Max Win Equity (VP + Assets) via Probability Management.",
                    directive: "**Velocity is Safety.** The 'Rusher' dictates the timeline. If you can't match their speed, you must exceed their efficiency immediately. Target 50% deck density for Movement (Boots).",
                    finisher: "**The Hover.** Move to the final exit square but *do not exit*. Farm points until an opponent is mathematically likely to die. Exert maximum pressure."
                },
                tactics: {
                    opener: "**Turn 1-4 (Cradle):** Buy +2/+3 Skill cards. You must reach **7 Skill** (Tomes/Master Key) quickly. Ignore cheap cards that don't cycle.",
                    mistakes: [
                        "**The Crown Trap:** Buying high-cost, 0-utility items early. It clogs the deck.",
                        "**Deep Dive Suicide:** Entering <30 VP zones with <3 Health.",
                        "**Hoarding Swords:** You only need 2 swords per shuffle. Don't overbuy."
                    ],
                    synergy: "**Teleport vs Crystal Caves:** Teleport cards bypass 'Stop' rooms.\n\n**The Hate Draft:** Buy a cheap Boot card just to strand an opponent in the deep.",
                    setup: "**Market Positioning:** Buy items (Keys/Backpack) on your *descent*, never your ascent."
                },
                intel: { scaling: "Base: Speed is king. // Legacy: Extraction & Franchise Board > Game Win.", meta: "**Cycle Tax:** Spend extra skill to flush the market row if it stagnates." }
            },
            {
                id: "co", name: "Coup", weight: 1.4, time: "15m", type: "Social", cat: "Bluffing",
                orientation: {
                    hook: "Poker with bullets. Lying is a resource.",
                    victory: "Last player breathing.",
                    directive: "**Information Liquidity.** Money is good; Information (Inquisitor) is better. Bluff early to build 'truth equity'.",
                    finisher: "**The 10 Coin Cap.** You MUST Coup at 10. Spend before you become a loot pinata."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** Claim Duke. Take 3 coins. Even if you don't have it. If challenged, you lose a life but gain crucial intel on table aggression.",
                    mistakes: [
                        "**Silent Duke:** Allowing free money ruins the economy. Challenge.",
                        "**Blind Assassin:** If blocked, you lose 3 coins. Coup is safer.",
                        "**Static Faction:** Switch teams to avoid targeting."
                    ],
                    synergy: "**The Pivot:** Claim Duke. If caught, claim Captain next. Confuses the read.",
                    setup: "Reformation: Deal Allegiances."
                },
                intel: { scaling: "3-4P: **Tactical.** // 5-6P: **Faction War.**", meta: "**Inquisitor:** Known cards cannot be bluffed." }
            },
            {
                id: "dm", name: "Dominion", weight: 2.4, time: "30m", type: "Technical", cat: "Deck Building",
                orientation: {
                    hook: "Your deck is an engine; trash the parts that don't work.",
                    victory: "Most VP when piles empty.",
                    directive: "**Trash is Treasure.** Destroy Coppers/Estates (Chapel). A 5-card deck plays its best combo every turn.",
                    finisher: "**Green or Gold.** If the engine stalls, buy Gold and Provinces. Don't be cute."
                },
                tactics: {
                    opener: "**Turn 1/2 (Cradle):** Buy Silver ($3) or Trasher (Chapel). NEVER buy Estate.",
                    mistakes: [
                        "**Village Idiot:** +Action without +Draw.",
                        "**Green Bloat:** Buying VP too early clog the engine.",
                        "**Mid-Game Copper:** Never buy Copper. It dilutes the signal."
                    ],
                    synergy: "**Village + Smithy:** The infinite loop.",
                    setup: "Check Kingdom for Trashing."
                },
                intel: { scaling: "2P: **Strategic.** // 4P: **Rush.**", meta: "**3-Pile End:** Watch the low piles." }
            },
            {
                id: "ek", name: "Exploding Kittens", weight: 1.1, time: "15m", type: "Psychological", cat: "Party",
                orientation: {
                    hook: "Russian Roulette. Hand management is life.",
                    victory: "Survival.",
                    directive: "**Hoard.** Cards are armor. Collect everything. Do not play cards unless you are dying.",
                    finisher: "**The Red Zone.** Last 10 cards. Dump attacks to force opponents to draw."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** Play nothing. Draw. Build a hand > 5.",
                    mistakes: [
                        "**Wasting Defuses:** Never play a Defuse unless forced.",
                        "**Blind Placement:** Put kitten 2-3 cards down, not top.",
                        "**Premature Aggression:** Don't attack when deck is safe."
                    ],
                    synergy: "**See Future + Attack:** The kill shot.",
                    setup: "Kittens = Players - 1."
                },
                intel: { scaling: "5P: **Chaos.**", meta: "**Nope War:** Save a Nope for a Nope." }
            },
            {
                id: "ka", name: "Kahuna", weight: 2.0, time: "30m", type: "Technical", cat: "Area Control",
                orientation: {
                    hook: "Graph theory warfare. Bridges cause collapses.",
                    victory: ">50% islands. Weighted scoring.",
                    directive: "**The Cascade.** Removing a bridge can make an opponent lose control of an island, removing *their* bridges. Chain reaction.",
                    finisher: "**Round 3 Swing.** Round 1 is worthless. Hoard cards for the final round."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** Place a bridge where you hold 2+ cards. Do not fight for shared nodes yet.",
                    mistakes: [
                        "**Telegraphing:** Playing 1 card. Burst 3-4 to seize control.",
                        "**Over-defending:** Don't defend useless islands.",
                        "**Empty Hand:** Entering a round with 0 cards is fatal."
                    ],
                    synergy: "**Joint Removal:** 2 cards removes a bridge. Surgical strike.",
                    setup: "Shuffle well."
                },
                intel: { scaling: "Strictly 2P.", meta: "**Magma Move:** Snipe structural bridges." }
            },
            {
                id: "ok", name: "Okko", weight: 2.5, time: "45m", type: "Tactical", cat: "Skirmish",
                orientation: {
                    hook: "Demon hunters. Resource allocation.",
                    victory: "Kill Leader.",
                    directive: "**Dice Reserve.** Always keep dice for defense. A unit without defense dice is dead.",
                    finisher: "**Focus Fire.** Wounded units deal full damage. Kill them."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** Move to cover. Do not dash into Line of Sight.",
                    mistakes: [
                        "**Splitting Party:** Isolated units die.",
                        "**Ignoring LOS:** Ranged units dominate corridors.",
                        "**Exhausting:** Using all dice to attack."
                    ],
                    synergy: "**Kami + Range:** Spirits block, guns shoot.",
                    setup: "Terrain blocks LOS."
                },
                intel: { scaling: "2P: Chess-like.", meta: "**Shaken State:** Target wounded." }
            },
            {
                id: "pa", name: "Pandemic", weight: 2.4, time: "45m", type: "Technical", cat: "Co-op",
                orientation: {
                    hook: "Logistics vs Algorithm.",
                    victory: "4 Cures.",
                    directive: "**Efficiency.** Treat to 2 cubes, not 0. Focus on trading cards. Movement without purpose is death.",
                    finisher: "**The Deck Timer.** Game ends when cards run out. Rush."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** Converge. Move pawns together to trade.",
                    mistakes: [
                        "**Eradication:** Wastes turns. Only cure.",
                        "**Quarterbacking:** Kills morale.",
                        "**Ignoring Discard:** Protect cities that just infected."
                    ],
                    synergy: "**Dispatcher + Medic:** The Ambulance.",
                    setup: "5 Epidemics."
                },
                intel: { scaling: "4P: **Hard.**", meta: "**Quiet Night:** Skip infection phase." }
            },
            {
                id: "pw", name: "Patchwork", weight: 1.6, time: "20m", type: "Technical", cat: "Abstract",
                orientation: {
                    hook: "Tetris Economics.",
                    victory: "Buttons - (2 x Empty).",
                    directive: "**Button ROI.** Early game: Buy Income (buttons on piece). Late game: Buy Area (size).",
                    finisher: "**Area Filler.** Cheap large pieces to cover the board."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** Buy income. Avoid 0-income pieces.",
                    mistakes: [
                        "**Ignoring 7x7:** 7 points is huge.",
                        "**1x1 Holes:** Impossible to fill.",
                        "**Overspending:** Buying expensive pieces early."
                    ],
                    synergy: "**Hate Draft:** Buy what they need.",
                    setup: "Neutral after 2-1."
                },
                intel: { scaling: "2P Only.", meta: "**ROI:** (Income x Time) - Cost." }
            },
            {
                id: "re", name: "The Resistance", weight: 1.6, time: "30m", type: "Social", cat: "Deduction",
                orientation: {
                    hook: "The Empire must fall.",
                    victory: "3 Wins.",
                    directive: "**Voting is Data.** Spies vote YES on dirty teams. Resistance votes NO on everything they aren't on.",
                    finisher: "**Hammer.** Spies win if 5 votes fail. Force the vote."
                },
                tactics: {
                    opener: "**Mission 1 (Cradle):** Vote YES only if you are on it.",
                    mistakes: [
                        "**Spy Fail M1:** Too risky.",
                        "**Silent Resistance:** Accuse to get data.",
                        "**Double Fail:** Two spies failing reveals both."
                    ],
                    synergy: "**Trap Teams:** Propose dirty team to check votes.",
                    setup: "Odd counts best."
                },
                intel: { scaling: "7P+: Chaos.", meta: "**Vote Down:** Default NO." }
            },
            {
                id: "sw", name: "Small World", weight: 2.4, time: "60m", type: "Technical", cat: "Area Control",
                orientation: {
                    hook: "Genocide for profit.",
                    victory: "Coins.",
                    directive: "**Decline Timing.** Once expansion stalls, Decline. Cycle races. Churn is money.",
                    finisher: "**Kamikaze.** Last turn, attack for points, don't defend."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** High population race. Blitz for max coins.",
                    mistakes: [
                        "**Over-expansion:** Thin lines break.",
                        "**Sentimentality:** Dump your race.",
                        "**Spite:** Only attack for profit."
                    ],
                    synergy: "**Spirit + Ghouls:** Permascoring.",
                    setup: "Tight map."
                },
                intel: { scaling: "Tight.", meta: "**Turn 1 Blitz:** Maximize income." }
            },
            {
                id: "sg", name: "Sushi Go Party!", weight: 1.3, time: "20m", type: "Probability", cat: "Drafting",
                orientation: {
                    hook: "Memory drafting.",
                    victory: "Points.",
                    directive: "**Menu Prob.** Draft consistent pointers (Nigiri). Block high-risk sets (Sashimi).",
                    finisher: "**Dessert.** Collect slowly to avoid penalty."
                },
                tactics: {
                    opener: "**Turn 1 (Cradle):** Tempura or Sashimi. Or 3-pt Nigiri.",
                    mistakes: [
                        "**Chasing:** Don't chase Sashimi late.",
                        "**Wasting Wasabi:** Wait for Squid.",
                        "**Maki Wars:** Don't pay for 2nd."
                    ],
                    synergy: "**Chopsticks:** Draft 2 cards later.",
                    setup: "Master Menu."
                },
                intel: { scaling: "6P+: Chaos.", meta: "**Spoon:** Steal exactly what you need." }
            },
            {
                id: "tr", name: "Ticket to Ride", weight: 1.9, time: "45m", type: "Social", cat: "Network",
                orientation: {
                    hook: "Railway chicken.",
                    victory: "Points.",
                    directive: "**The Hoard.** Hoard cards. Claim long routes (15pts). Block chokepoints.",
                    finisher: "**Panic Dump.** 2 trains left = game over. Place everything."
                },
                tactics: {
                    opener: "**Turn 1-10 (Cradle):** Draw cards. Do not build.",
                    mistakes: [
                        "**Telegraphing:** Don't look at the map.",
                        "**Greedy Tickets:** Late tickets are traps.",
                        "**Ignoring 6-trains:** Point engines."
                    ],
                    synergy: "**Coast Choke:** High density blocking.",
                    setup: "Shuffle well."
                },
                intel: { scaling: "2P: **Blocking.**", meta: "**Route Denial:** Claim grey routes to break them." }
            }
        ];

        // --- 2. LOGIC KERNEL ---

        // Robust SVG Icons
        const Icon = ({ name, size = 18, className = "" }) => {
            const icons = {
                search: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",
                chevronLeft: "M15 19l-7-7 7-7",
                star: "M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z",
                check: "M5 13l4 4L19 7",
                target: "M13 10V3L4 14h7v7l9-11h-7z",
                shield: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",
                zap: "M13 10V3L4 14h7v7l9-11h-7z",
                users: "M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z",
                refresh: "M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",
                starFilled: "M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z",
                skull: "M9 10a1 1 0 11-2 0 1 1 0 012 0zm5 0a1 1 0 11-2 0 1 1 0 012 0zm4-4a1 1 0 00-1.118 0c-.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118L3.034 6a1 1 0 00-.364 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.784.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"
            };
            return <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d={icons[name] || ""} /></svg>;
        };

        // Text Processing Engine
        const RichText = ({ content }) => {
            if (!content) return null;
            const parts = content.split(/(\$[^\$]+\$)|(\*\*[^\*]+\*\*)/g).filter(Boolean);
            return (
                <span>
                    {parts.map((part, i) => {
                        if (part.startsWith('$')) return <span key={i} className="formula mx-1">{part.replace(/\$/g, '')}</span>;
                        if (part.startsWith('**')) return <strong key={i} className="highlight">{part.replace(/\*\*/g, '')}</strong>;
                        return part;
                    })}
                </span>
            );
        };

        // Antifragile Storage Hook
        const useSafeStorage = (key, initial) => {
            const [data, setData] = useState(() => {
                try {
                    const saved = localStorage.getItem(key);
                    return saved ? JSON.parse(saved) : initial;
                } catch (e) {
                    return initial;
                }
            });
            useEffect(() => {
                try { localStorage.setItem(key, JSON.stringify(data)); } catch (e) {}
            }, [data, key]);
            return [data, setData];
        };

        const Card = ({ title, icon, children, color }) => (
            <div className="bg-panel p-5 rounded-lg border border-white/10 shadow-lg hover:border-white/20 transition-all duration-300">
                <h3 className={`text-[10px] font-mono uppercase mb-3 flex items-center gap-2 ${color} tracking-widest`}>
                    <Icon name={icon} size={12} /> {title}
                </h3>
                <div className="text-sm text-txt/90 leading-relaxed font-medium">{children}</div>
            </div>
        );

        // --- 3. VIEWPORT ---
        const DetailView = ({ game, onClose, isSaved, toggleSave }) => {
            const [tab, setTab] = useState('orientation');
            const [anim, setAnim] = useState('translate-y-full opacity-0');

            useEffect(() => {
                const timer = requestAnimationFrame(() => setAnim('translate-y-0 opacity-100'));
                return () => cancelAnimationFrame(timer);
            }, []);

            const handleClose = () => { 
                setAnim('translate-y-full opacity-0'); 
                setTimeout(onClose, 250); 
            };

            return (
                <div className="fixed inset-0 z-50 bg-black/95 backdrop-blur-xl flex justify-center overflow-y-auto overscroll-none">
                    <div className={`w-full max-w-4xl min-h-screen bg-bg transition-all duration-300 ease-out transform ${anim} border-x border-white/5`}>
                        <div className="p-6 md:p-12 pb-32">
                            {/* Nav */}
                            <div className="flex justify-between items-center mb-10 sticky top-0 py-4 bg-bg/95 z-20 backdrop-blur border-b border-white/5 -mx-6 px-6 md:-mx-12 md:px-12">
                                <button onClick={handleClose} className="text-[10px] font-mono text-muted hover:text-primary uppercase tracking-[0.2em] flex gap-2 items-center transition-colors">
                                    <Icon name="chevronLeft" size={14} /> Grid
                                </button>
                                <button onClick={() => toggleSave(game.id)} className={`flex items-center gap-2 px-3 py-1.5 rounded border text-[10px] font-mono uppercase tracking-widest transition-all ${isSaved ? 'border-primary text-primary bg-primaryDim' : 'border-white/10 text-muted hover:border-white/30'}`}>
                                    <Icon name={isSaved ? "check" : "star"} size={12} /> {isSaved ? "Tracked" : "Track"}
                                </button>
                            </div>

                            {/* Hero */}
                            <div className="mb-12">
                                <div className="flex items-baseline gap-3 mb-3">
                                    <span className="text-[9px] font-mono text-primary px-2 py-0.5 bg-primaryDim rounded uppercase tracking-widest border border-primary/20">0x{game.id.toUpperCase()}</span>
                                    <span className="text-[9px] font-mono text-muted px-2 py-0.5 bg-white/5 rounded uppercase">{game.cat}</span>
                                </div>
                                <h1 className="text-5xl md:text-7xl font-black text-white uppercase leading-none tracking-tight mb-8 text-transparent bg-clip-text bg-gradient-to-br from-white to-gray-400">{game.name}</h1>
                                
                                <div className="flex gap-1 bg-surface p-1 rounded-lg w-full md:w-auto inline-flex overflow-x-auto border border-white/10">
                                    {['orientation', 'tactics', 'intel'].map(t => (
                                        <button key={t} onClick={() => setTab(t)} className={`flex-1 md:flex-none text-[10px] font-mono uppercase tracking-widest px-6 py-2.5 rounded transition-all ${tab === t ? 'bg-white/10 text-white font-bold ring-1 ring-white/10' : 'text-muted hover:text-white'}`}>{t}</button>
                                    ))}
                                </div>
                            </div>

                            {/* Content */}
                            <div className="animate-fade-in space-y-8">
                                {tab === 'orientation' && (
                                    <>
                                        <div className="text-xl md:text-2xl font-light leading-relaxed text-txt/90 p-6 border-l-4 border-primary bg-primaryDim/5 rounded-r-lg">
                                            <RichText content={game.orientation.hook} />
                                        </div>
                                        <div className="grid md:grid-cols-2 gap-6">
                                            <Card title="Victory Condition" icon="check" color="text-success"><RichText content={game.orientation.victory} /></Card>
                                            <Card title="Prime Directive" icon="target" color="text-primary"><RichText content={game.orientation.directive} /></Card>
                                        </div>
                                        <div className="bg-panel p-6 rounded-lg border border-white/5 group">
                                            <h3 className="text-[10px] font-mono text-accent uppercase mb-2 tracking-widest flex items-center gap-2"><Icon name="skull" size={12}/> The Finisher (Grave)</h3>
                                            <p className="text-sm text-txt/90 font-mono leading-relaxed"><RichText content={game.orientation.finisher} /></p>
                                        </div>
                                    </>
                                )}
                                {tab === 'tactics' && (
                                    <>
                                        {/* CRADLE */}
                                        <div className="bg-gradient-to-r from-primaryDim/20 to-transparent border border-primary/20 p-6 rounded-lg">
                                            <h3 className="text-[10px] font-mono text-primary uppercase mb-2 flex items-center gap-2"><Icon name="zap" size={14}/> The Opener (Cradle)</h3>
                                            <p className="text-lg font-bold text-white"><RichText content={game.tactics.opener} /></p>
                                        </div>

                                        <div className="bg-accent/5 border border-accent/20 p-6 md:p-8 rounded-lg">
                                            <h3 className="text-[10px] font-mono text-accent uppercase mb-6 flex items-center gap-2"><Icon name="shield" size={14} /> Fatal Mistakes</h3>
                                            <ul className="space-y-4">
                                                {game.tactics.mistakes.map((m, i) => (
                                                    <li key={i} className="flex gap-4 text-sm text-txt/90 items-start">
                                                        <span className="font-mono text-accent/50 text-xs mt-1">0{i+1}</span>
                                                        <span className="leading-relaxed"><RichText content={m} /></span>
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>
                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div>
                                                <h3 className="text-[10px] font-mono text-primary uppercase mb-4 tracking-widest">Synergy Matrix</h3>
                                                <div className="text-sm text-txt/80 leading-relaxed whitespace-pre-line bg-panel p-6 rounded-lg border border-white/10"><RichText content={game.tactics.synergy} /></div>
                                            </div>
                                            <div>
                                                <h3 className="text-[10px] font-mono text-muted uppercase mb-4 tracking-widest">Setup Protocol</h3>
                                                <div className="p-6 bg-surface rounded-lg text-sm text-muted leading-relaxed border border-white/10"><RichText content={game.tactics.setup} /></div>
                                            </div>
                                        </div>
                                    </>
                                )}
                                {tab === 'intel' && (
                                    <div className="space-y-6">
                                        <Card title="Scaling Logic" icon="users" color="text-primary">
                                            <div className="space-y-3">
                                                {game.intel.scaling.split(' // ').map((s, i) => (
                                                    <div key={i} className="flex flex-col md:flex-row gap-2 md:gap-4 md:items-baseline">
                                                        <span className="text-[9px] font-mono bg-white/10 px-1.5 py-0.5 rounded text-txt/70 whitespace-nowrap uppercase">{s.split(':')[0]}</span>
                                                        <span className="text-sm text-txt/80"><RichText content={s.split(':')[1]} /></span>
                                                    </div>
                                                ))}
                                            </div>
                                        </Card>
                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div className="p-6 bg-panel border border-white/10 rounded-lg">
                                                <h3 className="text-[10px] font-mono text-muted uppercase mb-2">Expansion Meta</h3>
                                                <p className="text-sm text-txt/80 italic">{game.intel.expansion ? <RichText content={game.intel.expansion}/> : "N/A"}</p>
                                            </div>
                                            <div className="p-6 bg-panel border border-white/10 rounded-lg">
                                                <h3 className="text-[10px] font-mono text-muted uppercase mb-2">Deep Analysis</h3>
                                                <p className="text-[11px] font-mono text-primary/80 uppercase tracking-wide leading-relaxed"><RichText content={game.intel.meta} /></p>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- 4. APP ---
        const App = () => {
            const [activeId, setActiveId] = useState(null);
            const [saved, setSaved] = useSafeStorage('codex_save_v7', []);
            const [search, setSearch] = useState('');
            const [filter, setFilter] = useState('ALL');

            const toggleSave = (id) => setSaved(prev => prev.includes(id) ? prev.filter(x => x !== id) : [...prev, id]);

            const filtered = useMemo(() => {
                let data = filter === 'SAVED' ? DATABASE.filter(g => saved.includes(g.id)) : DATABASE;
                if (!search) return data.sort((a,b) => a.name.localeCompare(b.name));
                return data.filter(g => g.name.toLowerCase().includes(search.toLowerCase()) || g.cat.toLowerCase().includes(search.toLowerCase()));
            }, [search, saved, filter]);

            return (
                <div className="min-h-screen pb-24 relative overflow-hidden bg-black text-white">
                    <div className="fixed inset-0 pointer-events-none bg-[radial-gradient(circle_at_top,_#22d3ee15_0%,_transparent_40%)]"></div>

                    {/* Navbar */}
                    <nav className="sticky top-0 z-40 glass-nav px-6 py-5 flex justify-between items-center">
                        <div className="font-mono font-bold text-lg flex gap-3 items-center group cursor-default">
                            <div className="relative w-2.5 h-2.5">
                                <div className="absolute inset-0 bg-primary rounded-full animate-ping opacity-25"></div>
                                <div className="relative w-full h-full bg-primary rounded-full shadow-[0_0_10px_#22d3ee]"></div>
                            </div>
                            <span className="tracking-tighter">CODEX<span className="text-primary">LUDUS</span></span>
                        </div>
                        <button onClick={() => setFilter(filter === 'ALL' ? 'SAVED' : 'ALL')} className={`text-[10px] font-mono font-bold uppercase tracking-widest px-3 py-1.5 rounded border transition-all ${filter === 'SAVED' ? 'bg-primaryDim text-primary border-primary/30' : 'text-muted border-white/10'}`}>
                            {saved.length > 0 ? `${saved.length} Tracked` : 'Monitor'}
                        </button>
                    </nav>

                    {/* Content */}
                    <div className="pt-10 px-4 sm:px-6 max-w-7xl mx-auto relative z-10">
                        {/* Search */}
                        <div className="relative mb-12 max-w-lg group mx-auto md:mx-0">
                            <Icon name="search" className="absolute left-4 top-4 text-muted group-focus-within:text-primary transition-colors" />
                            <input type="text" placeholder="ACCESS DATABASE..." value={search} onChange={e=>setSearch(e.target.value)} className="w-full bg-surface/50 border border-white/10 rounded-lg py-3.5 pl-12 pr-4 font-mono text-sm focus:border-primary/50 outline-none text-white transition-all shadow-lg focus:shadow-[0_0_30px_-10px_rgba(34,211,238,0.1)]" />
                        </div>

                        {/* Grid */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                            {filtered.map(g => (
                                <div key={g.id} onClick={() => setActiveId(g.id)} className={`bg-surface border rounded-xl p-6 cursor-pointer group relative overflow-hidden flex flex-col justify-between h-72 transition-all duration-300 hover:-translate-y-1 animate-slide-up ${saved.includes(g.id) ? 'border-primary/30 shadow-[0_0_20px_-5px_rgba(34,211,238,0.15)]' : 'border-white/5 hover:border-white/20'}`}>
                                    <div className="flex justify-between items-start z-10">
                                        <div className="flex flex-col gap-1">
                                            <span className="text-[9px] font-mono text-primary/70 uppercase tracking-widest">0x{g.id.toUpperCase()}</span>
                                            <span className="text-[9px] font-mono text-muted/60 bg-white/5 w-fit px-1.5 rounded uppercase">{g.cat}</span>
                                        </div>
                                        {saved.includes(g.id) && <Icon name="starFilled" className="text-primary animate-fade-in" size={14} />}
                                    </div>
                                    <div className="z-10 mt-6">
                                        <h3 className="text-2xl font-black text-white group-hover:text-primary transition-colors uppercase leading-[0.9] tracking-tight mb-3">{g.name}</h3>
                                        <p className="text-xs text-muted line-clamp-3 leading-relaxed font-medium opacity-60 group-hover:opacity-100 transition-opacity">{g.orientation.hook}</p>
                                    </div>
                                    <div className="mt-6 flex justify-between items-center border-t border-white/5 pt-4 z-10">
                                        <div className="flex gap-3 text-[10px] font-mono text-muted">
                                            <span className="flex items-center gap-1"><Icon name="users" size={10}/> {g.weight}</span>
                                            <span className="flex items-center gap-1"><Icon name="refresh" size={10}/> {g.time}</span>
                                        </div>
                                        <Icon name="chevronLeft" className="rotate-180 text-white/20 group-hover:text-white transition-colors" size={14} />
                                    </div>
                                    <div className="absolute -bottom-24 -right-24 w-56 h-56 bg-gradient-to-br from-primary/10 to-transparent rounded-full blur-[60px] group-hover:bg-primary/20 transition-all duration-500"></div>
                                </div>
                            ))}
                        </div>

                        {filtered.length === 0 && (
                            <div className="text-center py-32 opacity-40 font-mono text-xs tracking-widest text-muted flex flex-col items-center gap-4">
                                <span>[NO ENTRIES FOUND]</span>
                                {filter === 'SAVED' && <span className="text-primary/70 border border-primary/20 px-4 py-2 rounded">NO ACTIVE TRACKING. ENGAGE 'TRACK' ON GRID ITEMS.</span>}
                            </div>
                        )}
                    </div>

                    <footer className="mt-24 text-center opacity-20 pb-12">
                        <p className="font-mono text-[9px] uppercase tracking-[0.4em]">System_Ready // v14.2 // Stability</p>
                    </footer>

                    {activeId && <DetailView game={DATABASE.find(g => g.id === activeId)} onClose={() => setActiveId(null)} isSaved={saved.includes(activeId)} toggleSave={toggleSave} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
